@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --cell-width: 135px;
  --cell-height: 68px;
}

body {
  font-family: Arial, Helvetica, sans-serif;
  @apply bg-background text-text overflow-x-hidden;
}

.hexagon {
  clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);
}

.hex-table {
  clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);
  /* Transparent background so the board remains visible */
  background: transparent;
  border: 4px solid #b22222;
}

.player-avatar {
  @apply w-12 h-12 rounded-full border border-yellow-400;
}

.starry-bg {
  background-color: #000;
  background-image:
    radial-gradient(#ffffff 1px, transparent 1px),
    radial-gradient(#ffffff 1px, transparent 1px);
  background-position:
    0 0,
    25px 25px;
  background-size: 50px 50px;
}

.board-3d {
  perspective: 800px;
}

.board-3d-grid {
  transform: rotateX(30deg) rotateZ(45deg);
  transform-style: preserve-3d;
}

.board-frame {
  @apply border-4 border-accent rounded-lg p-1 bg-surface;
  transform-style: preserve-3d;
}

/* Tilted view specifically for the Snake & Ladder board */
.snake-board-tilt {
  perspective: 1200px;
}

.snake-board-grid {
  transform-style: preserve-3d;
  transform-origin: bottom center;
  transition: transform 0.3s ease; /* ✅ scaling transition */
}

@keyframes roll {
  0% {
    transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateY(0);
  }
  50% {
    transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg) translateY(-1rem);
  }
  100% {
    transform: rotateX(720deg) rotateY(720deg) rotateZ(720deg) translateY(0);
  }
}

.animate-roll {
  animation: roll 1s ease-in-out;
}

.dice-container {
  perspective: 600px;
}

.dice-cube {
  @apply relative w-12 h-12 bg-white rounded-xl;
  transform-style: preserve-3d;
  transition: transform 0.5s;
}

.dice-face {
  @apply absolute w-full h-full flex items-center justify-center bg-white rounded-xl shadow-lg;
}

.dice-face .dot {
  @apply w-3 h-3 bg-black rounded-full;
}

.dice-face--front {
  transform: rotateY(0deg) translateZ(1.5rem);
}
.dice-face--back {
  transform: rotateY(180deg) translateZ(1.5rem);
}
.dice-face--right {
  transform: rotateY(90deg) translateZ(1.5rem);
}
.dice-face--left {
  transform: rotateY(-90deg) translateZ(1.5rem);
}
.dice-face--top {
  transform: rotateX(90deg) translateZ(1.5rem);
}
.dice-face--bottom {
  transform: rotateX(-90deg) translateZ(1.5rem);
}

.board-cell {
  @apply relative flex items-center justify-center rounded-xl text-text shadow-inner bg-surface border-2 border-accent;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
  transform: translateZ(5px);
  transform-style: preserve-3d;
  overflow: visible;
  width: var(--cell-width);
  height: var(--cell-height);
}

.board-cell::after {
  content: "";
  position: absolute;
  inset: 2px;
  border-radius: inherit;
  box-shadow: 0 0 8px rgba(250, 204, 21, 0.5);
  transform: translateZ(-1px);
}

.token {
  @apply absolute w-16 h-16 rounded-full shadow-lg object-cover;
  transform: translateZ(10px);
}

/* Player photo on a hexagonal cylinder */
/* Deprecated hexagonal token - kept for reference */
.player-token {
  position: absolute;
  width: 4rem;
  height: 4rem;
  transform-style: preserve-3d;
  transform: translateZ(10px);
  --cyl-h: 1.5rem; /* half of dice size */
  --token-radius: 2rem;
  --cyl-apothem: calc(var(--token-radius) * 0.866); /* distance from center */
  --side-color: #facc15; /* default amber */
  --border-color: #d97706;
}

/* New cube-style token */
.token-cube {
  position: absolute;
  width: 4rem;
  height: 4rem;
  transform: translateZ(10px);
  transform-style: preserve-3d;
  --side-color: #fde047; /* yellow-300 */
  --border-color: #d97706; /* amber-600 */
}

/* Dice-style token replacing player photo */
.token-dice {
  position: absolute;
  width: 4rem;
  height: 4rem;
  transform: translateZ(10px);
  transform-style: preserve-3d;
}

.token-dice .dice-cube {
  width: 100%;
  height: 100%;
}

.token-dice .dice-face {
  background-color: #dc2626; /* red dice */
  border: 1px solid #991b1b;
  border-radius: 0.5rem;
}

.token-dice .dice-face .dot {
  background-color: #fff;
}

/* Three.js token container */
.token-three {
  position: absolute;
  width: 12rem;
  height: 12rem;
  transform: translateZ(60px);
  /* Preserve 3D space so the photo can be positioned in depth */
  transform-style: preserve-3d;
  pointer-events: none;
}

.token-three canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.token-photo {
  position: absolute;
  width: 2.5rem;
  height: 2.5rem;
  top: 50%;
  left: 50%;
  /* Nudge the photo slightly forward so it stands out */
  transform: translate(-50%, -50%) translateZ(20px) rotateX(10deg);
  object-fit: cover;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
}

.token-cube-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  /* Align token with board surface while showing a slight side angle */
  transform: rotateX(calc(var(--board-angle, 60deg) * -1 - 25deg)) rotateY(25deg);
}

.cube-face {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: var(--side-color);
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
}

.cube-top {
  object-fit: cover;
  background-color: transparent;
  transform: rotateX(90deg) translateZ(2rem);
}

.cube-bottom {
  transform: rotateX(-90deg) translateZ(2rem);
}

.cube-front {
  transform: rotateY(0deg) translateZ(2rem);
}

.cube-back {
  transform: rotateY(180deg) translateZ(2rem);
}

.cube-right {
  transform: rotateY(90deg) translateZ(2rem);
}

.cube-left {
  transform: rotateY(-90deg) translateZ(2rem);
}

.token-top {
  @apply w-full h-full object-cover;
  clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);
  position: absolute;
  top: 0;
  left: 0;
  transform: translateZ(var(--cyl-h));
}

.token-base {
  @apply w-full h-full absolute;
  clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);
  background-color: var(--side-color, #facc15);
  border: 1px solid var(--border-color, #d97706);
  top: calc(100% + var(--cyl-h));
  left: 0;
  transform: translateZ(0);
}

.hex-cylinder {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  height: var(--cyl-h);
  transform-style: preserve-3d;
  transform-origin: center bottom;
}

.token-pillar {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  height: var(--cyl-h);
  transform-style: preserve-3d;
  transform-origin: center bottom;
}

.pillar-face {
  position: absolute;
  left: calc(50% - var(--token-radius) / 2);
  width: var(--token-radius);
  height: 100%;
  background-color: var(--side-color, #facc15);
  border: 1px solid var(--border-color, #d97706);
}

.pillar-front {
  transform: rotateY(0deg) translateZ(var(--cyl-apothem));
}
.pillar-right {
  transform: rotateY(-60deg) translateZ(var(--cyl-apothem));
}
.pillar-left {
  transform: rotateY(60deg) translateZ(var(--cyl-apothem));
}

.hex-side {
  position: absolute;
  left: calc(50% - var(--token-radius) / 2);
  width: var(--token-radius);
  height: 100%;
  background-color: var(--side-color, #facc15);
  border: 1px solid var(--border-color, #d97706);
}

.side-1 { transform: rotateY(0deg) translateZ(var(--cyl-apothem)); }
.side-2 { transform: rotateY(60deg) translateZ(var(--cyl-apothem)); }
.side-3 { transform: rotateY(120deg) translateZ(var(--cyl-apothem)); }
.side-4 { transform: rotateY(180deg) translateZ(var(--cyl-apothem)); }
.side-5 { transform: rotateY(240deg) translateZ(var(--cyl-apothem)); }
.side-6 { transform: rotateY(300deg) translateZ(var(--cyl-apothem)); }

/* Token color variations */
.token-yellow {
  --side-color: #fde047; /* yellow-300 */
  --border-color: #d97706; /* amber-600 */
}

.token-red {
  --side-color: #fca5a5; /* red-300 */
  --border-color: #b91c1c; /* red-700 */
}

.token-green {
  --side-color: #86efac; /* green-300 */
  --border-color: #16a34a; /* green-700 */
}

.board-cell.highlight {
  box-shadow: 0 0 10px 4px rgba(250, 204, 21, 0.8);
}

.board-cell.normal-highlight {
  background-color: #fde047; /* yellow-300 */
}

.board-cell.ladder-highlight {
  background-color: #86efac; /* green-300 */
}

.board-cell.snake-highlight {
  background-color: #fca5a5; /* red-300 */
}

.pot-cell {
  @apply absolute flex flex-col items-center justify-center hexagon bg-primary text-background border-2 border-accent;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
  width: calc(var(--cell-width) * 1.5);
  height: calc(var(--cell-height) * 1.5);
  top: calc(var(--cell-height) * -0.75);
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
}

.pot-cell.highlight {
  box-shadow: 0 0 10px 4px rgba(250, 204, 21, 0.8);
}

.logo-wall-main {
  @apply absolute flex items-center justify-center;
  width: calc(var(--cell-width) * 5.76); /* 20% smaller */
  height: calc(var(--cell-height) * 4.8); /* 20% smaller */
  top: calc(var(--cell-height) * -4.5); /* ✅ push above pot */
  left: 50%;
  transform: translateX(-50%) rotateX(-60deg) translateZ(-20px) scale(1.8); /* Enlarged, base anchored */
  transform-origin: bottom center;
  background-image: url("/assets/TonPlayGramLogo.jpg");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 5;
}


.snake-connector,
.ladder-connector {
  position: absolute;
  height: 12px;
  transform-origin: 0 50%;
  z-index: 2;
}

.snake-connector {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+CiAgPHBhdGggZD0iTTEyIDE2YzgtOCAxNi04IDI0IDBzMTYgOCAyNCAwIiBzdHJva2U9IiMxNmEzNGEiIHN0cm9rZS13aWR0aD0iNCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTTYwIDQ4Yy04IDgtMTYgOC0yNCAwcy0xNi04LTI0IDAiIHN0cm9rZT0iIzE2YTM0YSIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8Y2lyY2xlIGN4PSI1NiIgY3k9IjE2IiByPSI0IiBmaWxsPSIjZGMyNjI2Ii8+Cjwvc3ZnPg==");
  background-size: 100% 100%;
  background-repeat: no-repeat;
  border-radius: 4px;
}

.ladder-connector {
  background-color: #4ade80;
  border-left: var(--rail-width, 6px) solid #16a34a;
  border-right: var(--rail-width, 6px) solid #16a34a;
}

.board-marker {
  position: absolute;
  transform: translate(-50%, -50%) translateZ(6px);
}

.snake-marker {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHBhdGggZD0iTTEyIDE2YzgtOCAxNi04IDI0IDBzMTYgOCAyNCAwIiBzdHJva2U9IiMxNmEzNGEiIHN0cm9rZS13aWR0aD0iNCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTYwIDQ4Yy04IDgtMTYgOC0yNCAwcy0xNi04LTI0IDAiIHN0cm9rZT0iIzE2YTM0YSIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48Y2lyY2xlIGN4PSI1NiIgY3k9IjE2IiByPSI0IiBmaWxsPSIjZGMyNjI2Ii8+PC9zdmc+");
  background-size: contain;
  background-repeat: no-repeat;
}

.ladder-marker {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PGcgc3Ryb2tlPSIjMTZhMzRhIiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZmlsbD0ibm9uZSI+PGxpbmUgeDE9IjIwIiB5MT0iNCIgeDI9IjIwIiB5Mj0iNjAiIC8+PGxpbmUgeDE9IjQ0IiB5MT0iNCIgeDI9IjQ0IiB5Mj0iNjAiIC8+PGxpbmUgeDE9IjIwIiB5MT0iMTYiIHgyPSI0NCIgeTI9IjE2IiAvPjxsaW5lIHgxPSIyMCIgeTE9IjMwIiB4Mj0iNDQiIHkyPSIzMCIgLz48bGluZSB4MT0iMjAiIHkxPSI0NCIgeDI9IjQ0IiB5Mj0iNDQiIC8+PC9nPjwvc3ZnPg==");
  background-size: contain;
  background-repeat: no-repeat;
}

.coin-burst {
  position: absolute;
  left: 50%;
  bottom: 0;
  width: 0;
  height: 0;
  pointer-events: none;
  overflow: visible;
}

.coin-img {
  position: absolute;
  left: -10px;
  bottom: 0;
  width: 20px;
  height: 20px;
  transform: translate(-50%, 0);
  animation-name: coin-up;
  animation-duration: var(--dur);
  animation-delay: var(--delay);
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
}

@keyframes coin-up {
  to {
    transform: translate(calc(-50% + var(--dx)), -120px);
    opacity: 0;
  }
}
